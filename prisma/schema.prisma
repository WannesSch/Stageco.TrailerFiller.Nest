// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}
model User{
  id        Int     @id @default(autoincrement())
  name      String  @unique
  password  String  
  email     String
}

model Project{
  id        Int     @id @default(autoincrement())
  title     String
  description String?
  venueAddress String?
  crewChief String?
  createdAt DateTime?
  updatedAt DateTime?
  Subprojects Subproject[] @relation("ProjectToSubproject")
}

model Asset{
  id              Int   @id @default(autoincrement())
  unit            String
  name            String
  description     String?    
  height          Float
  width           Float
  depth           Float
  weight          Float
  modelPath       String?
  position        String?
  rotation        String?  
  content         Asset[] @relation("content")
  contentRelation Asset[] @relation("content")
  subprojectId    Int?
  subproject      Subproject?   @relation("ProjectToAsset", fields: [subprojectId], references: [subprojectId])
  trailerId       Int?
  trailer         Trailer?   @relation("TrailerWithAsset", fields: [trailerId], references: [id])
}
model Subproject {
  subprojectId     Int   @id @default(autoincrement())
  title         String  
  description   String?
  departureDate DateTime?
  createdAt     DateTime?
  updatedAt     DateTime?
  projectId     Int?
  project       Project?   @relation("ProjectToSubproject", fields: [projectId], references: [id])
  Trailers      Trailer[]  @relation("ProjectToTrailer")
  Assets        Asset[]    @relation("ProjectToAsset")
}
model Trailer {
  id        Int   @id @default(autoincrement())
  width     Float 
  depth    Float
  height   Float
  weight    Float?
  maxWeight Float
  subprojectId  Int?
  Assets    Asset[]   @relation("TrailerWithAsset")
  subproject   Subproject?   @relation("ProjectToTrailer", fields: [subprojectId], references: [subprojectId])   
}

